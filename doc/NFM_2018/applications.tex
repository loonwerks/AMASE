\section{Applications}

We updated the WBS model~\cite{Stewart17:IMBSA} by capturing components' faulty behaviors in Safety Annex. The fault nodes defined in a common fault library were invoked in components' Safety Annex. This allows the components' nominal behaviors and faulty behaviors be modeled separately. At the top-level AADL component, the maximal number of faults that can be active at any point in execution was defined in the Safety Annex. The AGREE contracts at the top-level component were verified using AGREE, with the "Perform Safety Analysis during AGREE Verification" option selected, so the tool auto-wove the nominal and faulty behaviors before feeding to the back-end model checker.

In this example, the top level contract ``Pedal pressed and no skid implies brake pressure applied'' was verified valid against a system implementation when there was at most one fault active during execution, but invalid when there were more than one fault. The counterexample indicated that both Selector's outputs failed to non-deterministic values due to the faults introduced.

We also demonstrated on the Quad-Redundant Flight Control System (QFCS) model~\cite{QFCS15:backes} that the Safety Annex can be used to introduce faulty behaviors to test existing fault response or mitigation logic: the system level properties failed when un-handled faulty behaviors were introduced.

Lastly, we explored using Safety Annex to introduce more complicated faults at the system level on a simplified QFCS model with cross-channel communications:

\begin{itemize} 
	\item Byzantine faults~\cite{Driscoll-Byzantine-Fault} were simulated by creating one-to-one connections from the source to multiple observers so disagreements were introduced by injecting faults to individual outputs. A system-level property failed due to the fault on the baseline model, but did not fail on the model with Byzantine fault handling protocol added. Using Safety Annex like this can test a system's vulnerability to Byzantine faults and consequent mitigation mechanisms as well.
	
	\item Hardware dependent faults were simulated by injecting faults to hardware components (physical layer) to affect their data outputs (logical layer), and consequently failing the software components bound to the hardware components. The relationship between the hardware components' outputs and the software components' inputs were specified in AGREE as part of the system's nominal behavior.	
\end{itemize}


















